<!--
  Generated template for the User page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-buttons start>
      <button ion-button menuToggle icon-only (click)="openMenu()" >
        <ion-icon name='menu'></ion-icon>
      </button>
    </ion-buttons>
    <ion-title>ユーザ情報編集</ion-title>
  </ion-navbar>
</ion-header>
<ion-content class="outer-content" no-padding class="outer-content">
    <ion-list>
        <button ion-item (click)="photolibraryCapture()">
          <ion-label fixed>顔</ion-label>
          <ion-avatar item-right>
            <img [src]="userData.avatar + '?' + dateTime">
          </ion-avatar>
        </button>
        <ion-item *ngIf="isUpload">
          <label style="  color: white;  background-color: red; padding: 6px; border-radius: 12px; ">
            ＋写真を選択
            <input type="file" accept="image/*" (change)="handleInputChange($event)"  style="display:none;"/>
          </label>
        </ion-item>
      <ion-item>
        <ion-label fixed>名前</ion-label>
        <ion-input type="text" [(ngModel)]="userData.name"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label fixed>生年月日</ion-label>
        <ion-datetime displayFormat="YYYY-MM-DD" [(ngModel)]="userData.birthday"></ion-datetime>
      </ion-item>
      <button ion-item (click)="bindMobile()">
        <ion-label fixed>携帯電話</ion-label>
        <ion-note item-end>{{userData.telphone}}</ion-note>
      </button>
      <button ion-item (click)="bindEmail()">
        <ion-label fixed>メール</ion-label>
        <ion-note item-end>{{userData.email}}</ion-note>
      </button>
      <!--
      <ion-item>
        <ion-label fixed>携帯電話</ion-label>
          <div item-content margin-left> 
            {{userData.telphone}}
          </div>
        <button ion-button icon-only clear item-end (click)="openSms()">
          <ion-icon ios="ios-add-circle" md="md-add-circle"></ion-icon>   
        </button> 
      </ion-item>
      -->
      <ion-item>
        <ion-label fixed>パスワード</ion-label>
        <ion-input type="password" [(ngModel)]="userData.password"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label fixed>性別</ion-label>
        <ion-select [(ngModel)]="userData.gender">
          <ion-option value='1'> 男 </ion-option>
          <ion-option value='0'> 女 </ion-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-label fixed>出身地</ion-label>
        <ion-select [(ngModel)]="userData.country" interface="action-sheet" cancelText="取消">
          <ion-option *ngFor="let c of country" value="{{c}}"> {{c}} </ion-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-label fixed>居住地域</ion-label>
        <ion-select [(ngModel)]="userData.address" interface="action-sheet" cancelText="取消">
          <ion-option *ngFor="let address of addresses" value="address"> {{address}} </ion-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-label fixed>中国在住歴</ion-label>
        <ion-select [(ngModel)]="userData.live_china" interface="action-sheet" cancelText="取消">
          <ion-option *ngFor="let time of liveTimes" value="{{time[0]}}">
            {{time[1]}}
          </ion-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-label fixed>職業</ion-label>
        <ion-select [(ngModel)]="userData.job" interface="action-sheet" cancelText="取消">
          <ion-option *ngFor="let job of jobs" value="{{job}}">{{job}}</ion-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-label fixed>趣味</ion-label>
        <ion-select [(ngModel)]="userData.interest" interface="action-sheet" cancelText="取消">
          <ion-option *ngFor="let interest of interests" value="{{interest}}">{{interest}}</ion-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-label fixed>挨拶</ion-label>
        <ion-input type="text" [(ngModel)]="userData.self_introduction"></ion-input>
      </ion-item>
      <ion-item *ngIf="isApp" tappable (click)="openWechat()">
        <ion-row no-margin no-padding style="margin-bottom: -6px;">
          <ion-col col-4>
            WeChat
          </ion-col>
          <ion-col col-8>
            {{userData.wechat_id}}
          </ion-col>
        </ion-row>
      </ion-item>

    </ion-list>
    <button ion-button full tappable (click)="onSave(userData)" >保存</button>
  </ion-content>
